<?xml version="1.0" encoding="UTF-8"?>
<!--
    WebSocketClient.xml
    Copyright (c) 2018 Rolado Islas
    Released under the MIT license

    WebSocket client following RFC 6455
-->
<component name="WebSocketClient" extends="Task">
    <children>
        <contentNode id="chat"></contentNode>
    </children>
    <interface>
        <!-- Fields -->
        <field id="on_open" type="assocarray" alwaysNotify="true" />
        <field id="on_close" type="string" alwaysNotify="true" />
        <field id="on_message" type="assocarray" alwaysNotify="true" />
        <field id="thumbnailCache" type="assocArray" alwaysNotify="true"/>  <!--Caches thumbnails for Task Wrapper-->
        <field id="messageHeights" type="roArray" alwaysNotify="true"/>
        <field id="constants" type="assocarray"/>
        <field id="cookies" type="roArray"/>
        <field id="chatChanged" type="boolean" alwaysNotify="true"/>
        <field id="superChat" type="roArray" alwaysNotify="true"/>
        <field id="streamclaim" type="string" value="none"/>
        <field id="channelid" type="string" value="none"/>
        <field id="allowedHeight" type="Int" value="960"/> <!--Set allowed height of chat here.-->
        <field id="currentViewers" type="Int" value="0"/>
        <field id="blocked" type="roArray"/> <!--Blocked users from preferences-->
        <field id="on_error" type="assocarray" alwaysNotify="true" />
        <field id="STATE_CONNECTING" type="integer" />
        <field id="STATE_OPEN" type="integer" />
        <field id="STATE_CLOSING" type="integer" />
        <field id="STATE_CLOSED" type="integer" />
        <field id="ready_state" type="integer" alwaysNotify="true" />
        <field id="protocols" type="array" alwaysNotify="true" />
        <field id="headers" type="array" alwaysNotify="true" />
        <field id="secure" type="boolean" alwaysNotify="true" />
        <field id="buffer_size" type="integer" alwaysNotify="true" />
        <!-- Functions -->
        <field id="open" type="string" alwaysNotify="true" />
        <field id="send" type="array" alwaysNotify="true" />
        <field id="close" type="array" alwaysNotify="true" />
    </interface>
    <script type="text/brightscript" uri="pkg:/components/generic/utility/isValid.brs" />
    <script type="text/brightscript" uri="pkg:/components/generic/network/http.brs" />
    <script type="text/brightscript" uri="pkg:/components/generic/network/websocket/WebSocketClient.brs" />
    <script type="text/brightscript" uri="pkg:/components/generic/network/websocket/WebSocketClientTask.brs" />
    <script type="text/brightscript" uri="pkg:/components/generic/network/websocket/ByteUtil.brs" />
</component>
